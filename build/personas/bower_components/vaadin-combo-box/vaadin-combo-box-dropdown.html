<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../vaadin-overlay/vaadin-overlay.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"></head><body><dom-module id="vaadin-combo-box-dropdown"><template><style>:host{display:block;}:host > #overlay{display:none;}</style><vaadin-combo-box-overlay id="overlay" hidden$="[[hidden]]" opened="[[opened]]" template="{{template}}" style="align-items: stretch; margin: 0;"><slot></slot></vaadin-combo-box-overlay></template></dom-module><script>{var VaadinComboBoxOverlay=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'vaadin-combo-box-overlay'}}]),b}(Vaadin.OverlayElement);customElements.define(VaadinComboBoxOverlay.is,VaadinComboBoxOverlay);var DropdownElement=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._boundSetPosition=a._setPosition.bind(a),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'vaadin-combo-box-dropdown'}},{key:'properties',get:function(){return{opened:{type:Boolean,notify:!0},template:{type:Object,notify:!0},touchDevice:{type:Boolean,reflectToAttribute:!0,value:function(){try{return document.createEvent('TouchEvent'),!0}catch(a){return!1}}},positionTarget:{type:Object},verticalOffset:{type:Number,value:0},alignedAbove:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_openedChanged(opened)']}}]),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.addEventListener('iron-resize',this._boundSetPosition)}},{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.$.overlay.addEventListener('vaadin-overlay-outside-click',function(a){a.preventDefault()})}},{key:'disconnectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this.removeEventListener('iron-resize',this._boundSetPosition),this.opened=!1}},{key:'notifyResize',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'notifyResize',this).call(this),this.positionTarget&&this.opened&&(this._setPosition(),requestAnimationFrame(this._setPosition.bind(this)))}},{key:'_openedChanged',value:function(a){a?(this.$.overlay.style.position=this._isPositionFixed(this.positionTarget)?'fixed':'absolute',this._setPosition(),window.addEventListener('scroll',this._boundSetPosition,!0),document.addEventListener('click',this._outsideClickListener.bind(this),!0),this.dispatchEvent(new CustomEvent('vaadin-combo-box-dropdown-opened',{bubbles:!0,composed:!0}))):(window.removeEventListener('scroll',this._boundSetPosition,!0),document.removeEventListener('click',this._outsideClickListener.bind(this),!0),this.dispatchEvent(new CustomEvent('vaadin-combo-box-dropdown-closed',{bubbles:!0,composed:!0})))}},{key:'_outsideClickListener',value:function(a){var b=a.composedPath();0>b.indexOf(this.positionTarget)&&0>b.indexOf(this.$.overlay)&&(this.opened=!1)}},{key:'_isPositionFixed',value:function(a){var b=this._getOffsetParent(a);return'fixed'===window.getComputedStyle(a).position||b&&this._isPositionFixed(b)}},{key:'_getOffsetParent',value:function(a){if(a.assignedSlot)return a.assignedSlot.parentElement;if(a.parentElement)return a.offsetParent;var b=a.parentNode;if(b&&11===b.nodeType&&b.host)return b.host}},{key:'_verticalOffset',value:function(a,b){return this.alignedAbove?-a.height:b.height+this.verticalOffset}},{key:'_shouldAlignAbove',value:function(){var a=(window.innerHeight-this.positionTarget.getBoundingClientRect().bottom-Math.min(document.body.scrollTop,0))/window.innerHeight;return 0.3>a}},{key:'_setPosition',value:function(a){var b=Math.round;if(a&&a.target){var c=a.target===document?document.body:a.target,d=this.$.overlay.parentElement;if(!(c.contains(this.$.overlay)||c.contains(this.positionTarget))||d!==document.body)return}var e=this.positionTarget.getBoundingClientRect();this.alignedAbove=this._shouldAlignAbove();var f=this.$.overlay.getBoundingClientRect();this._translateX=e.left-f.left+(this._translateX||0),this._translateY=e.top-f.top+(this._translateY||0)+this._verticalOffset(f,e);var g=window.devicePixelRatio||1;this._translateX=b(this._translateX*g)/g,this._translateY=b(this._translateY*g)/g,this.$.overlay.style.transform='translate3d('+this._translateX+'px, '+this._translateY+'px, 0)',this.$.overlay.style.width=this.positionTarget.clientWidth+'px',this.$.overlay.style.justifyContent=this.alignedAbove?'flex-end':'flex-start',this.dispatchEvent(new CustomEvent('position-changed'))}}]),b}(Polymer.mixinBehaviors(Polymer.IronResizableBehavior,Polymer.Element));customElements.define(DropdownElement.is,DropdownElement),window.Vaadin=window.Vaadin||{},Vaadin.DropdownElement=DropdownElement}</script></body></html>