<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="import" href="../iron-scroll-target-behavior/iron-scroll-target-behavior.html"><script>(function(){var a,b,c,d,e=Math.floor,f=Math.round,g=Math.abs,h=Math.ceil,i=Math.min,j=Math.max,k=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),l=k&&8<=k[1],m=3,n=null!=Polymer.flush,o=n?Polymer.Async.animationFrame:0,p=n?Polymer.Async.idlePeriod:1,q=n?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),window.PolymerIronList=Polymer.Class((c={is:'iron-list',properties:{items:{type:Array},maxPhysicalCount:{type:Number,value:500},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var a=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return a-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return j(0,this._virtualCount-this._physicalCount)},set _virtualStart(a){a=this._clamp(a,0,this._maxVirtualStart),this.grid&&(a-=a%this._itemsPerRow),this._virtualStartVal=a},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(a){a%=this._physicalCount,0>a&&(a=this._physicalCount+a),this.grid&&(a-=a%this._itemsPerRow),this._physicalStartVal=a},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(a){this._physicalCountVal=a},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this.grid?this._estRowsInView*this._rowHeight*this._maxPages:0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var a=this._firstVisibleIndexVal;if(null==a){var b=this._physicalTop+this._scrollOffset;a=this._iterateItems(function(a,c){return b+=this._getPhysicalSizeIncrement(a),b>this._scrollPosition?this.grid?c-c%this._itemsPerRow:c:this.grid&&this._virtualCount-1===c?c-c%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=a}return a},get lastVisibleIndex(){var a=this._lastVisibleIndexVal;if(null==a){if(this.grid)a=i(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var b=this._physicalTop+this._scrollOffset;this._iterateItems(function(c,d){b<this._scrollBottom&&(a=d),b+=this._getPhysicalSizeIncrement(c)})}this._lastVisibleIndexVal=a}return a},get _defaultScrollTarget(){return this},get _virtualRowCount(){return h(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return h(this._viewportHeight/this._rowHeight)},get _physicalRows(){return h(this._physicalCount/this._itemsPerRow)}},a='_itemsParent',d={},d[a]=d[a]||{},d[a].get=function(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},b='_scrollOffset',d[b]=d[b]||{},d[b].get=function(){return this._scrollerPaddingTop+this.scrollOffset},babelHelpers.defineProperty(c,'attached',function(){this._debounceRender(this._render,o),this.listen(this,'iron-resize','_resizeHandler')}),babelHelpers.defineProperty(c,'detached',function(){this.unlisten(this,'iron-resize','_resizeHandler')}),babelHelpers.defineProperty(c,'_setOverflow',function(a){this.style.webkitOverflowScrolling=a===this?'touch':'',this.style.overflow=a===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,o)}),babelHelpers.defineProperty(c,'updateViewportBoundaries',function(){var a=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(a['padding-top'],10),this._isRTL=!('rtl'!==a.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()}),babelHelpers.defineProperty(c,'_scrollHandler',function(){var a=j(0,i(this._maxScrollTop,this._scrollTop)),b=a-this._scrollPosition,c=0<=b;if(this._scrollPosition=a,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,g(b)>this._physicalSize&&0<this._physicalSize){b-=this._scrollOffset;var d=f(b/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=d,this._physicalStart+=d,this._physicalTop=e(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var h=this._getReusables(c);c?(this._physicalTop=h.physicalTop,this._virtualStart+=h.indexes.length,this._physicalStart+=h.indexes.length):(this._virtualStart-=h.indexes.length,this._physicalStart-=h.indexes.length),this._update(h.indexes,c?null:h.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),q)}}),babelHelpers.defineProperty(c,'_getReusables',function(a){var b,c,d,e,f=[],g=this._hiddenContentSize*this._ratio,h=this._virtualStart,i=this._virtualEnd,j=this._physicalCount,k=this._physicalTop+this._scrollOffset,l=this._physicalBottom+this._scrollOffset,m=this._scrollTop,n=this._scrollBottom;for(a?(b=this._physicalStart,c=this._physicalEnd,d=m-k):(b=this._physicalEnd,c=this._physicalStart,d=l-n);e=this._getPhysicalSizeIncrement(b),d-=e,!(f.length>=j||d<=g);)if(a){if(i+f.length+1>=this._virtualCount)break;if(k+e>=m-this._scrollOffset)break;f.push(b),k+=e,b=(b+1)%j}else{if(0>=h-f.length)break;if(k+this._physicalSize-e<=n)break;f.push(b),k-=e,b=0===b?j-1:b-1}return{indexes:f,physicalTop:k-this._scrollOffset}}),babelHelpers.defineProperty(c,'_update',function(a,b){if(!(a&&0===a.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(a),this._updateMetrics(a),b)for(;b.length;){var c=b.pop();this._physicalTop-=this._getPhysicalSizeIncrement(c)}this._positionItems(),this._updateScrollerSize()}}),babelHelpers.defineProperty(c,'_isClientFull',function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition}),babelHelpers.defineProperty(c,'_increasePoolIfNeeded',function(a){var b=this._clamp(this._physicalCount+a,m,this._virtualCount-this._virtualStart),c=b-this._physicalCount,d=f(0.5*this._physicalCount);if(!(0>c)){if(0<c){var e=window.performance.now();[].push.apply(this._physicalItems,this._createPool(c)),[].push.apply(this._physicalSizes,Array(c)),this._physicalCount+=c,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=c),this._update(),this._templateCost=(window.performance.now()-e)/c,d=f(0.5*this._physicalCount)}this._virtualEnd===this._virtualCount-1||0===d||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(f(50/this._templateCost),1,d)),p):this._debounceRender(this._increasePoolIfNeeded.bind(this,d),q))}}),babelHelpers.defineProperty(c,'_render',function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var a=this._getReusables(!0);this._physicalTop=a.physicalTop,this._virtualStart+=a.indexes.length,this._physicalStart+=a.indexes.length,this._update(a.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(m))}),babelHelpers.defineProperty(c,'_itemsChanged',function(a){if('items'===a.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,o);else if('items.splices'===a.path){this._adjustVirtualIndex(a.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var b=a.value.indexSplices.some(function(a){return this._isIndexRendered(a.index)},this);(!this._isClientFull()||b)&&this._debounceRender(this._render,o)}else'items.length'!==a.path&&this._forwardItemPath(a.path,a.value)}),babelHelpers.defineProperty(c,'_forwardItemPath',function(a,b){a=a.slice(6);var c=a.indexOf('.')+1;0===c&&(c=a.length);var d,e=n?parseInt(a.substring(0,c),10):parseInt(a.substring(1,c),10),f=this._offscreenFocusedItem,g=this._isIndexRendered(e);g?d=this.modelForElement(this._physicalItems[this._getPhysicalIndex(e)]):f&&(d=this.modelForElement(f));d&&d[this.indexAs]===e&&(a=a.substring(c),a=this.as+(a?'.'+a:''),n?d._setPendingPropertyOrPath(a,b,!1,!0):d.notifyPath(a,b,!0),d._flushProperties&&d._flushProperties(!0),g&&(this._updateMetrics([e]),this._positionItems(),this._updateScrollerSize()))}),babelHelpers.defineProperty(c,'_adjustVirtualIndex',function(a){a.forEach(function(a){if(a.removed.forEach(this._removeItem,this),a.index<this._virtualStart){var b=j(a.addedCount-a.removed.length,a.index-this._virtualStart);this._virtualStart+=b,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=b)}},this)}),babelHelpers.defineProperty(c,'_removeItem',function(a){this.$.selector.deselect(a),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===a&&this._removeFocusedItem()}),babelHelpers.defineProperty(c,'_iterateItems',function(a,b){var c,d,e,f;if(2===arguments.length&&b){for(f=0;f<b.length;f++)if(c=b[f],d=this._computeVidx(c),null!=(e=a.call(this,c,d)))return e;}else{for(c=this._physicalStart,d=this._virtualStart;c<this._physicalCount;c++,d++)if(null!=(e=a.call(this,c,d)))return e;for(c=0;c<this._physicalStart;c++,d++)if(null!=(e=a.call(this,c,d)))return e}}),babelHelpers.defineProperty(c,'_computeVidx',function(a){return a>=this._physicalStart?this._virtualStart+(a-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+a}),babelHelpers.defineProperty(c,'_assignModels',function(a){this._iterateItems(function(a,b){var c=this._physicalItems[a],d=this.items&&this.items[b];if(null!=d){var e=this.modelForElement(c);e.__key__=this._collection?this._collection.getKey(d):null,this._forwardProperty(e,this.as,d),this._forwardProperty(e,this.selectedAs,this.$.selector.isSelected(d)),this._forwardProperty(e,this.indexAs,b),this._forwardProperty(e,'tabIndex',this._focusedVirtualIndex===b?0:-1),this._physicalIndexForKey[e.__key__]=a,e._flushProperties&&e._flushProperties(!0),c.removeAttribute('hidden')}else c.setAttribute('hidden','')},a)}),babelHelpers.defineProperty(c,'_updateMetrics',function(a){Polymer.flush?Polymer.flush():Polymer.dom.flush();var b=0,c=0,d=this._physicalAverageCount,e=this._physicalAverage;this._iterateItems(function(a){c+=this._physicalSizes[a]||0,this._physicalSizes[a]=this._physicalItems[a].offsetHeight,b+=this._physicalSizes[a],this._physicalAverageCount+=this._physicalSizes[a]?1:0},a),this.grid?(this._updateGridMetrics(),this._physicalSize=h(this._physicalCount/this._itemsPerRow)*this._rowHeight):this._physicalSize=this._physicalSize+b-c,this._physicalAverageCount!==d&&(this._physicalAverage=f((e*d+b)/this._physicalAverageCount))}),babelHelpers.defineProperty(c,'_positionItems',function(){this._adjustScrollPosition();var a=this._physicalTop;if(this.grid){var b=this._itemsPerRow*this._itemWidth,c=(this._viewportWidth-b)/2;this._iterateItems(function(b,d){var f=d%this._itemsPerRow,g=e(f*this._itemWidth+c);this._isRTL&&(g*=-1),this.translate3d(g+'px',a+'px',0,this._physicalItems[b]),this._shouldRenderNextRow(d)&&(a+=this._rowHeight)})}else this._iterateItems(function(b){this.translate3d(0,a+'px',0,this._physicalItems[b]),a+=this._physicalSizes[b]})}),babelHelpers.defineProperty(c,'_getPhysicalSizeIncrement',function(a){return this.grid?this._computeVidx(a)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[a]}),babelHelpers.defineProperty(c,'_shouldRenderNextRow',function(a){return a%this._itemsPerRow===this._itemsPerRow-1}),babelHelpers.defineProperty(c,'_adjustScrollPosition',function(){var a=0===this._virtualStart?this._physicalTop:i(this._scrollPosition+this._physicalTop,0);if(0!==a){this._physicalTop-=a;var b=this._scrollTop;!l&&0<b&&this._resetScrollPosition(b-a)}}),babelHelpers.defineProperty(c,'_resetScrollPosition',function(a){this.scrollTarget&&0<=a&&(this._scrollTop=a,this._scrollPosition=this._scrollTop)}),babelHelpers.defineProperty(c,'_updateScrollerSize',function(a){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+j(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,a=a||0===this._scrollHeight,a=a||this._scrollPosition>=this._estScrollHeight-this._physicalSize,a=a||this.grid&&this.$.items.style.height<this._estScrollHeight,(a||g(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)}),babelHelpers.defineProperty(c,'scrollToIndex',function(a){if(!('number'!==typeof a||0>a||a>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){a=this._clamp(a,0,this._virtualCount-1),(!this._isIndexRendered(a)||a>=this._maxVirtualStart)&&(this._virtualStart=this.grid?a-2*this._itemsPerRow:a-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=e(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var b=this._physicalStart,c=this._virtualStart,d=0,f=this._hiddenContentSize;c<a&&d<=f;)d+=this._getPhysicalSizeIncrement(b),b=(b+1)%this._physicalCount,c++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+d),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}}),babelHelpers.defineProperty(c,'_resetAverage',function(){this._physicalAverage=0,this._physicalAverageCount=0}),babelHelpers.defineProperty(c,'_resizeHandler',function(){this._debounceRender(function(){g(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},o)}),babelHelpers.defineProperty(c,'_isIndexRendered',function(a){return a>=this._virtualStart&&a<=this._virtualEnd}),babelHelpers.defineProperty(c,'_isIndexVisible',function(a){return a>=this.firstVisibleIndex&&a<=this.lastVisibleIndex}),babelHelpers.defineProperty(c,'_getPhysicalIndex',function(a){return(this._physicalStart+(a-this._virtualStart))%this._physicalCount}),babelHelpers.defineProperty(c,'_clamp',function(a,b,c){return i(c,j(b,a))}),babelHelpers.defineProperty(c,'_debounceRender',function(a,b){n?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,b,a.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(a)}),babelHelpers.defineProperty(c,'_forwardProperty',function(a,b,c){n?a._setPendingProperty(b,c):a[b]=c}),babelHelpers.defineProperty(c,'_forwardHostPropV2',function(a,b){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(c){c&&this.modelForElement(c).forwardHostProp(a,b)},this)}),babelHelpers.defineProperty(c,'_notifyInstancePropV2',function(a,b,c){if(Polymer.Path.matches(this.as,b)){var d=a[this.indexAs];b==this.as&&(this.items[d]=c),this.notifyPath(Polymer.Path.translate(this.as,'items.'+d,b),c)}}),babelHelpers.defineEnumerableProperties(c,d),c))})();</script></head><body></body></html>