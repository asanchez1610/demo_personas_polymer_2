<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="vaadin-grid-column.html"><link rel="import" href="../vaadin-checkbox/vaadin-checkbox.html"></head><body><dom-module id="vaadin-grid-selection-column"><template><template class="header" id="defaultHeaderTemplate"><vaadin-checkbox class="vaadin-grid-select-all-checkbox" aria-label="Select All" hidden$="[[_selectAllHidden]]" on-checked-changed="_onSelectAllCheckedChanged" checked="[[_isChecked(selectAll, _indeterminate)]]" indeterminate="[[_indeterminate]]"></vaadin-checkbox></template><template id="defaultBodyTemplate"><vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox></template></template><script>{var GridSelectionColumnElement=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._boundOnActiveItemChanged=a._onActiveItemChanged.bind(a),a._boundOnDataProviderChanged=a._onDataProviderChanged.bind(a),a._boundOnSelectedItemsChanged=a._onSelectedItemsChanged.bind(a),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_prepareHeaderTemplate',value:function(){var a=this._prepareTemplatizer(this._findTemplate('template.header')||this.$.defaultHeaderTemplate);return a.templatizer.dataHost=a===this.$.defaultHeaderTemplate?this:this.dataHost,a}},{key:'_prepareBodyTemplate',value:function(){var a=this._prepareTemplatizer(this._findTemplate('template:not(.header):not(.footer)')||this.$.defaultBodyTemplate);return a.templatizer.dataHost=a===this.$.defaultBodyTemplate?this:this.dataHost,a}}],[{key:'is',get:function(){return'vaadin-grid-selection-column'}},{key:'properties',get:function(){return{width:{type:String,value:'56px'},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},headerTemplate:Object,template:Object,_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}},{key:'observers',get:function(){return['_onSelectAllChanged(selectAll)']}}]),babelHelpers.createClass(b,[{key:'disconnectedCallback',value:function(){if(babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this._grid){this._grid.removeEventListener('active-item-changed',this._boundOnActiveItemChanged),this._grid.removeEventListener('data-provider-changed',this._boundOnDataProviderChanged),this._grid.removeEventListener('filter-changed',this._boundOnSelectedItemsChanged),this._grid.removeEventListener('selected-items-changed',this._boundOnSelectedItemsChanged);var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(a&&window.ShadyDOM&&this.parentElement){var c=this.parentElement,d=this.nextElementSibling;c.removeChild(this),d?c.insertBefore(this,d):c.appendChild(this)}}}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._grid&&(this._grid.addEventListener('active-item-changed',this._boundOnActiveItemChanged),this._grid.addEventListener('data-provider-changed',this._boundOnDataProviderChanged),this._grid.addEventListener('filter-changed',this._boundOnSelectedItemsChanged),this._grid.addEventListener('selected-items-changed',this._boundOnSelectedItemsChanged))}},{key:'_onSelectAllChanged',value:function(a){void 0===a||!this._grid||this._selectAllChangeLock||(this._grid.selectedItems=a&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[])}},{key:'_arrayContains',value:function(c,a){for(var b=0;c&&a&&a[b]&&0<=c.indexOf(a[b]);b++);return b==a.length}},{key:'_onSelectAllCheckedChanged',value:function(a){this.selectAll=this._indeterminate||a.target.checked}},{key:'_isChecked',value:function(a,b){return b||a}},{key:'_onActiveItemChanged',value:function(a){var b=a.detail.value;if(this.autoSelect){var c=b||this._previousActiveItem;c&&this._grid._toggleItem(c)}this._previousActiveItem=b}},{key:'_onSelectedItemsChanged',value:function(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}},{key:'_onDataProviderChanged',value:function(){this._selectAllHidden=!Array.isArray(this._grid.items)}}]),b}(Vaadin.GridColumnElement);customElements.define(GridSelectionColumnElement.is,GridSelectionColumnElement),window.Vaadin=window.Vaadin||{},Vaadin.GridSelectionColumnElement=GridSelectionColumnElement}</script></dom-module></body></html>