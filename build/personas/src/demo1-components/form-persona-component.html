<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/vaadin-valo-theme/vaadin-combo-box.html"><link rel="import" href="../../bower_components/vaadin-combo-box/vaadin-combo-box.html"><link rel="import" href="../../bower_components/vaadin-valo-theme/vaadin-text-field.html"><link rel="import" href="../../bower_components/vaadin-text-field/vaadin-text-field.html"><link rel="import" href="../../bower_components/vaadin-valo-theme/vaadin-date-picker.html"><link rel="import" href="../../bower_components/vaadin-date-picker/vaadin-date-picker.html"><link rel="import" href="../../bower_components/vaadin-button/vaadin-button.html"><link rel="import" href="../../bower_components/vaadin-progress-bar/vaadin-progress-bar.html"><link rel="import" href="../../bower_components/vaadin-dialog/vaadin-dialog.html"><link rel="import" href="../demo1-styles/main-styles.html"><link rel="import" href="../demo1-provider/persona-provider.html"></head><body><dom-module id="form-persona-component"><template><style include="valo-combo-box"></style><style include="main-styles"></style><persona-provider id="personaProvider"></persona-provider><vaadin-text-field label="Nombres" value="{{activeItem.nombres}}"></vaadin-text-field><vaadin-text-field label="Apellidos" value="{{activeItem.apellidos}}"></vaadin-text-field><vaadin-combo-box label="Tipo de documento" placeholder="Seleccione" items="[[responseTipoDocumento.data]]" item-value-path="id" item-label-path="nombre" value="{{activeItem.tipo_documento}}"></vaadin-combo-box><vaadin-text-field value="{{activeItem.num_documento}}" label="Número de documento"></vaadin-text-field><vaadin-date-picker id="fecNac" label="Fecha de nacimiento"></vaadin-date-picker><vaadin-text-field value="{{activeItem.email}}" label="Email"></vaadin-text-field><vaadin-text-field value="{{activeItem.telefono}}" label="Telefono"></vaadin-text-field><vaadin-progress-bar id="loadingRegistro" hidden="true" indeterminate="" value="0"></vaadin-progress-bar><div style="width: 100%;text-align: center; margin-top: 10px;"><vaadin-button on-tap="registro" id="btnRegistro" theme="primary">{{actionTitlePersona}}</vaadin-button><vaadin-button on-tap="clearForm" id="btnClear" theme="primary danger">Reset</vaadin-button></div><vaadin-dialog id="simpledialog"><template><div>Persona se registró de forma correcta.</div></template></vaadin-dialog></template><script>var FormPersonaComponent=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.loadTipoDocumentoIdentidad()}},{key:'loadTipoDocumentoIdentidad',value:function(){var a=this,b=this.$.personaProvider.documentoidentidadDoRequest();b.then(function(b){a.responseTipoDocumento=b.response})}},{key:'registro',value:function(){var a=this;if(this.activeItem.fec_nacimiento=this.$.fecNac.value?this.$.fecNac.value+' 00:00:00':null,this.$.btnRegistro.disabled=!0,this.$.loadingRegistro.hidden=!1,this.activeItem){var b=this.$.personaProvider.registroPersona(this.activeItem);b.then(function(){a.$.btnRegistro.disabled=!1,a.$.loadingRegistro.hidden=!0,a.clearForm()})}}},{key:'clearForm',value:function(){var a=this;this.personas=[],this.activeItem={},this.$.personaProvider.listarPersonasDoRequest().then(function(b){a.personas=b.response})}}],[{key:'is',get:function(){return'form-persona-component'}},{key:'properties',get:function(){return{formatFecNacimiento:{type:String,value:'',notify:!0},actionTitlePersona:{type:String,notify:!0},activeItem:{type:Object,notify:!0,value:{}},responseTipoDocumento:{type:Array,value:[]},personas:{type:Object,notify:!0}}}}]),b}(Polymer.Element);window.customElements.define(FormPersonaComponent.is,FormPersonaComponent);</script></dom-module></body></html>